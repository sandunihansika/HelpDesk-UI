<app-loader [loader]="dataLoading"></app-loader>
<app-common-grid
  #inqueryGrid
  [addAllow]="addAllow"
  [editAllow]="editAllow"
  [showToolBar]="showToolBar"
  [deleteAllow]="deleteAllow"
  [showSearchBox]="showSearchBox"
  (addBtnClicked)="addButtonClick()"
>
  <button
  pButton
  type="button"
  icon="fa fa-file-text-o"
  style="margin-right: .25em"
  class="btn-quotation"
  label="Quotation"
  (click)="viewQuotation(this.inqueryGrid.selectedEntity)"
  *ngIf="this.inqueryGrid.selectedEntity && showQuotation"
></button>
  <button
    pButton
    type="button"
    style="margin-right: .25em"
    icon="fa fa-history"
    class="btn-history"
    label="View Status History"
    (click)="viewHistory(this.inqueryGrid.selectedEntity)"
    *ngIf="this.inqueryGrid.selectedEntity"
  ></button>
  <button
  type="button"
  pButton
  style="margin-right: .25em"
  icon="fa fa-check-square-o"
  label="Got Consent"
  iconPos="left"
  (click)="gotConsent(this.inqueryGrid.selectedEntity)"
  *ngIf="inqueryGrid.selectedEntity && inqueryGrid.selectedEntity.status.name === 'Need consent'"
></button>
  <button
    type="button"
    pButton
    style="margin-right: .25em"
    icon="fa fa-check-square-o"
    label="Got Reconsent"
    iconPos="left"
    (click)="gotReConsent(this.inqueryGrid.selectedEntity)"
    *ngIf="inqueryGrid.selectedEntity && inqueryGrid.selectedEntity.status.name === 'Re-need consent'"
  ></button>
  <button
    type="button"
    pButton
    style="margin-right: .25em"
    icon="fa fa-check-square-o"
    label="Approved Quotation"
    iconPos="left"
    (click)="approve(this.inqueryGrid.selectedEntity)"
    *ngIf="inqueryGrid.selectedEntity && (inqueryGrid.selectedEntity.status.name === 'Remind customer' || inqueryGrid.selectedEntity.status.name === 'Re-remind customer')"
  ></button>
  <button
    type="button"
    pButton
    style="margin-right: .25em"
    icon="fa fa-times"
    label="Rejected Quotation"
    iconPos="left"
    class="btn-reject"
    (click)="reject(this.inqueryGrid.selectedEntity)"
    *ngIf="inqueryGrid.selectedEntity && (inqueryGrid.selectedEntity.status.name === 'Remind customer' || inqueryGrid.selectedEntity.status.name === 'Re-remind customer')"
  ></button>
  <button
    type="button"
    pButton
    style="margin-right: .25em"
    icon="fa fa-share-square-o"
    label="Resend Quotation"
    iconPos="left"
    class="btn-resend"
    (click)="resend(this.inqueryGrid.selectedEntity)"
    *ngIf="inqueryGrid.selectedEntity && (inqueryGrid.selectedEntity.status.name === 'Remind customer' || inqueryGrid.selectedEntity.status.name === 'Re-remind customer')"
  ></button>
<!--  <button-->
<!--    type="button"-->
<!--    pButton-->
<!--    style="margin-right: .25em"-->
<!--    icon="fa fa-check"-->
<!--    label="Mark As Done"-->
<!--    iconPos="left"-->
<!--    *ngIf="inqueryGrid.selectedEntity && inqueryGrid.selectedEntity.status.name === 'Other'"-->
<!--  ></button>-->
</app-common-grid>


<p-dialog header="Inquiry Form" [modal]="true" [(visible)]="display" [baseZIndex]="10000" [modal]="true">
  <app-customer-handling></app-customer-handling>
</p-dialog>

<p-dialog header="Inquiry Id: {{id + ' / ' + 'Customer Name: ' + (fName || cName)}}" [modal]="true" [(visible)]="displayHistory">
  <app-common-grid
    #statusHistoryGrid
    header="Status History"
    [addAllow]="addAllowHistory"
    [showToolBar]="showToolBar"
    [showSearchBox]="showSearchBox"
  >
  </app-common-grid>
  <app-loader [loader]="dataLoading"></app-loader>
</p-dialog>



